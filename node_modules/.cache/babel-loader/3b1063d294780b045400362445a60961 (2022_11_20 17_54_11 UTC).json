{"ast":null,"code":"import _objectSpread from\"C:/Users/ezekm/SCF/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import config from'../config.json';import{authHeader}from'../_helpers';export var userService={login:login,logout:logout,register:register,getAll:getAll,getById:getById,update:update,delete:_delete};function login(username,password){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})};return fetch(\"\".concat(config.apiUrl,\"/users/authenticate\"),requestOptions).then(handleResponse).then(function(user){// store user details and jwt token in local storage to keep user logged in between page refreshes\nlocalStorage.setItem('user',JSON.stringify(user));return user;});}function logout(){// remove user from local storage to log user out\nlocalStorage.removeItem('user');}function getAll(){var requestOptions={method:'GET',headers:authHeader()};return fetch(\"\".concat(config.apiUrl,\"/users\"),requestOptions).then(handleResponse);}function getById(id){var requestOptions={method:'GET',headers:authHeader()};return fetch(\"\".concat(config.apiUrl,\"/users/\").concat(id),requestOptions).then(handleResponse);}function register(user){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)};return fetch(\"\".concat(config.apiUrl,\"/users/register\"),requestOptions).then(handleResponse);}function update(user){var requestOptions={method:'PUT',headers:_objectSpread(_objectSpread({},authHeader()),{},{'Content-Type':'application/json'}),body:JSON.stringify(user)};return fetch(\"\".concat(config.apiUrl,\"/users/\").concat(user.id),requestOptions).then(handleResponse);;}// prefixed function name with underscore because delete is a reserved word in javascript\nfunction _delete(id){var requestOptions={method:'DELETE',headers:authHeader()};return fetch(\"\".concat(config.apiUrl,\"/users/\").concat(id),requestOptions).then(handleResponse);}function handleResponse(response){return response.text().then(function(text){var data=text&&JSON.parse(text);if(!response.ok){if(response.status===401){// auto logout if 401 response returned from api\nlogout();location.reload(true);}var error=data&&data.message||response.statusText;return Promise.reject(error);}return data;});}","map":{"version":3,"names":["config","authHeader","userService","login","logout","register","getAll","getById","update","delete","_delete","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","apiUrl","then","handleResponse","user","localStorage","setItem","removeItem","id","response","text","data","parse","ok","status","location","reload","error","message","statusText","Promise","reject"],"sources":["C:/Users/ezekm/SCF/src/_services/user.service.js"],"sourcesContent":["import config from '../config.json';\r\nimport { authHeader } from '../_helpers';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    getById,\r\n    update,\r\n    delete: _delete\r\n};\r\n\r\nfunction login(username, password) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, password })\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/authenticate`, requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n\r\n            return user;\r\n        });\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction getAll() {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction getById(id) {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/register`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction update(user) {\r\n    const requestOptions = {\r\n        method: 'PUT',\r\n        headers: { ...authHeader(), 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${user.id}`, requestOptions).then(handleResponse);;\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401) {\r\n                // auto logout if 401 response returned from api\r\n                logout();\r\n                location.reload(true);\r\n            }\r\n\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n\r\n        return data;\r\n    });\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}