{"ast":null,"code":"import _objectSpread from\"C:/Users/caleb/VSchildren/SCF/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import config from'../config.json';import{authHeader}from'../_helpers';export var userService={login:login,logout:logout,register:register,getAll:getAll,getById:getById,update:update,delete:_delete};function login(username,password){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:username,password:password})};return fetch(\"\".concat(config.apiUrl,\"/users/authenticate\"),requestOptions).then(handleResponse).then(function(user){// store user details and jwt token in local storage to keep user logged in between page refreshes\nlocalStorage.setItem('user',JSON.stringify(user));return user;});}function logout(){// remove user from local storage to log user out\nlocalStorage.removeItem('user');}function getAll(){var requestOptions={method:'GET',headers:authHeader()};return fetch(\"\".concat(config.apiUrl,\"/users\"),requestOptions).then(handleResponse);}function getById(id){var requestOptions={method:'GET',headers:authHeader()};return fetch(\"\".concat(config.apiUrl,\"/users/\").concat(id),requestOptions).then(handleResponse);}function register(user){var requestOptions={method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(user)};return fetch(\"\".concat(config.apiUrl,\"/users/register\"),requestOptions).then(handleResponse);}function update(user){var requestOptions={method:'PUT',headers:_objectSpread(_objectSpread({},authHeader()),{},{'Content-Type':'application/json'}),body:JSON.stringify(user)};return fetch(\"\".concat(config.apiUrl,\"/users/\").concat(user.id),requestOptions).then(handleResponse);;}// prefixed function name with underscore because delete is a reserved word in javascript\nfunction _delete(id){var requestOptions={method:'DELETE',headers:authHeader()};return fetch(\"\".concat(config.apiUrl,\"/users/\").concat(id),requestOptions).then(handleResponse);}function handleResponse(response){return response.text().then(function(text){var data=text&&JSON.parse(text);if(!response.ok){if(response.status===401){// auto logout if 401 response returned from api\nlogout();location.reload(true);}var error=data&&data.message||response.statusText;return Promise.reject(error);}return data;});}","map":{"version":3,"names":["config","authHeader","userService","login","logout","register","getAll","getById","update","delete","_delete","username","password","requestOptions","method","headers","body","JSON","stringify","fetch","apiUrl","then","handleResponse","user","localStorage","setItem","removeItem","id","response","text","data","parse","ok","status","location","reload","error","message","statusText","Promise","reject"],"sources":["C:/Users/caleb/VSchildren/SCF/src/_services/user.service.js"],"sourcesContent":["import config from '../config.json';\r\nimport { authHeader } from '../_helpers';\r\n\r\nexport const userService = {\r\n    login,\r\n    logout,\r\n    register,\r\n    getAll,\r\n    getById,\r\n    update,\r\n    delete: _delete\r\n};\r\n\r\nfunction login(username, password) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ username, password })\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/authenticate`, requestOptions)\r\n        .then(handleResponse)\r\n        .then(user => {\r\n            // store user details and jwt token in local storage to keep user logged in between page refreshes\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n\r\n            return user;\r\n        });\r\n}\r\n\r\nfunction logout() {\r\n    // remove user from local storage to log user out\r\n    localStorage.removeItem('user');\r\n}\r\n\r\nfunction getAll() {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction getById(id) {\r\n    const requestOptions = {\r\n        method: 'GET',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction register(user) {\r\n    const requestOptions = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/register`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction update(user) {\r\n    const requestOptions = {\r\n        method: 'PUT',\r\n        headers: { ...authHeader(), 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(user)\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${user.id}`, requestOptions).then(handleResponse);;\r\n}\r\n\r\n// prefixed function name with underscore because delete is a reserved word in javascript\r\nfunction _delete(id) {\r\n    const requestOptions = {\r\n        method: 'DELETE',\r\n        headers: authHeader()\r\n    };\r\n\r\n    return fetch(`${config.apiUrl}/users/${id}`, requestOptions).then(handleResponse);\r\n}\r\n\r\nfunction handleResponse(response) {\r\n    return response.text().then(text => {\r\n        const data = text && JSON.parse(text);\r\n        if (!response.ok) {\r\n            if (response.status === 401) {\r\n                // auto logout if 401 response returned from api\r\n                logout();\r\n                location.reload(true);\r\n            }\r\n\r\n            const error = (data && data.message) || response.statusText;\r\n            return Promise.reject(error);\r\n        }\r\n\r\n        return data;\r\n    });\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}